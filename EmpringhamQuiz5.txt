Epi5143 Winter 2020 Quiz 5Due by Tuesday March 24th, 2019 by 11:59pm.  Submit quiz via Github (link will be provided by email) From the class data:Determine the proportion of admissions which recorded a diagnosis of  diabetes for admissions between  January 1st 2003 and December 31st, 2004.  Generate a frequency table of frequency of diabetes diagnoses, with the denominator being the total number of admissions between January 1st 2003 and December 31st, 2004 .This exercise requires sorting, flat-filing, and linking (merging) tables.Hints:  1.  From the NhrAbstracts dataset, you will have to create a new dataset which contains only unique admissions (hraEncWID) with admit dates (hraAdmDtm) between January 1st, 2003 and December 31st, 2004: this is your spine dataset.2.  From the NhrDiagnosis table you will need to determine if one or more diagnosis codes (hdgcd)  for diabetes (ICD9 starting with Ô250Õ or ICD10 starting with ÔE11Õ or ÔE10Õ) was present for each encounter  in the diagnosis table and create an indicator variable called DM (=0 for no diabetes codes, =1 for one or more diabetes codes). 3. You will need to flatten your diabetes diagnoses dataset with respect to encounter ID (hdgHraEncWID).4. You will need to link the spine dataset you generated from NhrAbstracts and the flattened diabetes diagnoses dataset you generated based on the NhrDiagnosis table using the encounter idÕs  from each database (renaming as required).5. Your final dataset should have the same # of observations (and include all encounter IDs) found in your the spine dataset and have an indicator variable, DM which is 1 if any diabetes code was present, and 0 otherwise.¥ Please provide your final SAS code, and resulting frequency table for the  indicator variable you created (plain text so it can be uploaded to Github as a plain text .sas file). You are  encouraged to include inline comments to explain the purpose of each step in your program (which may earn you part marks if your code doesnÕt actually do what it is supposed to).The FREQ Procedure
diabetes	Frequency	Percent	Cumulative
Frequency	Cumulative
Percent
0	1898	95.81	1898	95.81
1	83	4.19	1981	100.00
Therefore 4.19% of admissions between 2003-2004 recorded a diabetes code for admission. Code: libname ldata "/folders/myfolders/class_data"; libname quiz5 '/folders/myfolders/Epi work folder/data';libname spine '/folders/myfolders/Epi work folder/data';data quiz5.nhrabstracts; *loading data set and saving as alternate name;set ldata.nhrabstracts; run; data spine;set quiz5.nhrabstracts;  by hraencwid; if year(datepart(hraAdmDtm)) >2004 then delete; run; data spine; set spine;by hraencwid; if year(datepart(hraAdmDtm)) <2003 then delete; run; *deleting encounters that did not occur between 2003-2004; proc sort data=spine nodupkey;by hraencwid;run;*ensuring no duplicate encounters; data quiz5.nhrdiagnosis; set ldata.nhrdiagnosis; run; *loading diagnosis data; data quiz5.nhrdiagnosis; set quiz5.nhrdiagnosis; dxcode= substr(hdgCd, 1, 3); run; *creating dummy variable dx code that just contains the first three values of hdgCd;data quiz5.nhrdiagnosis; set quiz5.nhrdiagnosis; if dxcode in ("250" "E11" "E10") then diabetes=1; else diabetes=0; run; *creating diabetes flag; proc means data=quiz5.nhrdiagnosis noprint;class hdgHraEncWid; types hdgHraEncWid; var diabetes;output out=diabetes2 max (diabetes)= diabetes n(diabetes)= count; run; *flat filing data set; proc freq data=diabetes2; tables diabetes count; run; data diabetes2; set diabetes2; hraencwid= hdgHraEncWid; run; *creating common ID variable; data final; Merge spine (in=a)diabetes2 (in=b); by hraencwid; if a and b; run; *merging data set- contains 2230 observations which is the same as the spine; proc freq data=final; table diabetes; run; 